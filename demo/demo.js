!function(){"use strict";var t={327:function(t,e,n){n.d(e,{Z:function(){return $}});var r=n(729),o=n.n(r);let i=["error","warn","log","info"],u="warn";function s(t,...e){i.indexOf(t)<=i.indexOf(u)&&console[t](...e)}function c(t){return i.reduce((function(e,n){return e[n]=s.bind(console,n,t),e}),{})}s.level=c.level=function(t){u=t};let a=c("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,((...t)=>{[].slice.call(document.querySelectorAll(".ql-container")).forEach((e=>{e.__quill&&e.__quill.emitter&&e.__quill.emitter.handleDOM(...t)}))}))}));class l extends(o()){constructor(){super(),this.listeners={},this.on("error",a.error)}emit(){a.log.apply(a,arguments),super.emit.apply(this,arguments)}handleDOM(t,...e){(this.listeners[t.type]||[]).forEach((function({node:n,handler:r}){(t.target===n||n.contains(t.target))&&r(t,...e)}))}listenDOM(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:n})}}l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"};var f=l,p=n(269),h=n.n(p);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=y(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},v.apply(this,arguments)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}function b(t,e,n){return(e=O(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function _(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=S(t);if(e){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}var x=h().import("blots/embed"),k=function(t){w(n,t);var e=j(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,null,[{key:"sanitize",value:function(t){return t}}]),n}(h().import("formats/image")),R=["id","src"],A=function(t){w(n,t);var e=j(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"format",value:function(t,e){R.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):v(S(n.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=t.id,r=t.src,o=v(S(n),"create",this).call(this);return o.id=e,o.append(this.maker(r)),o}},{key:"maker",value:function(t){return k.create(t)}},{key:"value",value:function(t){return t.querySelector("[src]").getAttribute("src")}},{key:"formats",value:function(t){return R.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}}]),n}(x);b(A,"blotName","image/loading"),b(A,"className","uploading-image"),b(A,"tagName","span");var T=function(){h().register("formats/image",k,!0),h().register({"formats/image/loading":A})};function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function N(t,e,n){return e&&q(t.prototype,e),n&&q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=U(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},D.apply(this,arguments)}function U(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}function H(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=F(t);if(e){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}function z(t,e,n){return(e=G(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(t){var e=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===C(e)?e:String(e)}var X=function(t){H(n,t);var e=I(n);function n(){return L(this,n),e.apply(this,arguments)}return N(n,null,[{key:"create",value:function(t){var e=D(F(n),"create",this).call(this);return e.appendChild(this.maker(t)),e}},{key:"value",value:function(t){return t.querySelector("[src]").getAttribute("src")}},{key:"maker",value:function(t){var e=document.createElement("audio");return e.controls=!0,e.src=t,e}},{key:"sanitize",value:function(t){return t}}]),n}(h().import("blots/embed"));z(X,"blotName","audio"),z(X,"tagName","span");var Z=function(t){H(n,t);var e=I(n);function n(){return L(this,n),e.apply(this,arguments)}return N(n,null,[{key:"maker",value:function(t){return X.maker(t)}}]),n}(A);z(Z,"blotName","audio/loading"),z(Z,"className","uploading-audio");var J=function(){h().register("formats/audio",X,!0),h().register({"formats/audio/loading":Z})};function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==Y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Y(i)?i:String(i)),r)}var o,i}var $=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.increment=0,this.options=n,this.placeholderDelta=null,T(),J(),"function"!=typeof this.options.upload&&console.warn("[Missing config] upload function that returns a promise is required"),this.options.accept||(this.options.accept=[{image:["jpeg","png","gif","svg","webp"]},{audio:["mpeg","aac"]}]),"string"==typeof this.options.accept&&(this.options.accept=this.options.accept.split(",")),this.options.accept=this.options.accept.flatMap((function(t){return"object"===Y(t)?Object.keys(t).flatMap((function(e){return t[e].map((function(t){return e+"/"+t}))})):"string"==typeof t?t:void 0}));var o=this.quill.getModule("toolbar");o&&o.addHandler("image",(function(){return r.selectLocalImage()})),this.quill.root.addEventListener("drop",(function(t){return r.handleDrop(t)}),!1),this.quill.root.addEventListener("paste",(function(t){return r.handlePaste(t)}),!1)}var e,n,r;return e=t,(n=[{key:"selectLocalImage",value:function(){var t=this;this.quill.focus(),this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept",this.options.accept.join(",")),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.addEventListener("input",(function(){var e=t.fileHolder.files[0];e&&t.readAndUploadFile(e)})),document.body.appendChild(this.fileHolder),this.fileHolder.click(),document.body.removeChild(this.fileHolder)}},{key:"handleDrop",value:function(t){var e=this;if(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){if(t.stopPropagation(),t.preventDefault(),document.caretRangeFromPoint){var n=document.getSelection(),r=document.caretRangeFromPoint(t.clientX,t.clientY);n&&r&&n.setBaseAndExtent(r.startContainer,r.startOffset,r.startContainer,r.startOffset)}else if(document.caretPositionFromPoint){var o=document.getSelection(),i=document.caretPositionFromPoint(t.clientX,t.clientY);o&&i&&o.setBaseAndExtent(i.offsetNode,i.offset,i.offsetNode,i.offset)}this.quill.focus(),[].forEach.call(t.dataTransfer.files,(function(t,n){return e.readAndUploadFile(t)}))}}},{key:"handlePaste",value:function(t){var e=t.clipboardData||window.clipboardData;if(e&&(e.items||e.files))for(var n=e.items||e.files,r=0;r<n.length;r++)this.quill.focus(),this.readAndUploadFile(n[r])}},{key:"readAndUploadFile",value:function(t){var e=this;if(t){var n=this.options.accept.join("|").replace(/\*/g,".*");if(new RegExp("^("+n+")$","i").test(t.type)){var r,o=this.quill.getSelection().index,i=t.type.match(/^(.*)\//i)[1];r=this.insertBlot(URL.createObjectURL(t),o,i),this.options.upload(t,i).then((function(t){e.insertToEditor(t,r,i)}),(function(){e.removeBlot(r)}))}}}},{key:"insertBlot",value:function(t,e,n){var r=this.quill.insertEmbed(e,n+"/loading",{id:"loading-"+this.increment++,src:t},f.sources.USER);return this.quill.setSelection(e+1,1,f.sources.USER),r}},{key:"insertToEditor",value:function(t,e,n){var r=this.removeBlot(e);this.quill.insertEmbed(r,n,t,f.sources.API)}},{key:"removeBlot",value:function(t){if(t){var e=this.quill.getContents();t=JSON.stringify(t.ops[t.ops.length-1]);var n=-1;return e.ops.find((function(e){return!!e.insert&&(n+="string"==typeof e.insert?e.insert.length:1,JSON.stringify(e)===t)}))&&this.quill.deleteText(n,1,f.sources.API),n}}}])&&Q(e.prototype,n),r&&Q(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},729:function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),i.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},i.prototype.listeners=function(t,e){var r=n?n+t:t,o=this._events[r];if(e)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var i=0,u=o.length,s=new Array(u);i<u;i++)s[i]=o[i].fn;return s},i.prototype.emit=function(t,e,r,o,i,u){var s=n?n+t:t;if(!this._events[s])return!1;var c,a,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,o),!0;case 5:return l.fn.call(l.context,e,r,o,i),!0;case 6:return l.fn.call(l.context,e,r,o,i,u),!0}for(a=1,c=new Array(f-1);a<f;a++)c[a-1]=arguments[a];l.fn.apply(l.context,c)}else{var p,h=l.length;for(a=0;a<h;a++)switch(l[a].once&&this.removeListener(t,l[a].fn,void 0,!0),f){case 1:l[a].fn.call(l[a].context);break;case 2:l[a].fn.call(l[a].context,e);break;case 3:l[a].fn.call(l[a].context,e,r);break;case 4:l[a].fn.call(l[a].context,e,r,o);break;default:if(!c)for(p=1,c=new Array(f-1);p<f;p++)c[p-1]=arguments[p];l[a].fn.apply(l[a].context,c)}}return!0},i.prototype.on=function(t,e,r){var i=new o(e,r||this),u=n?n+t:t;return this._events[u]?this._events[u].fn?this._events[u]=[this._events[u],i]:this._events[u].push(i):(this._events[u]=i,this._eventsCount++),this},i.prototype.once=function(t,e,r){var i=new o(e,r||this,!0),u=n?n+t:t;return this._events[u]?this._events[u].fn?this._events[u]=[this._events[u],i]:this._events[u].push(i):(this._events[u]=i,this._eventsCount++),this},i.prototype.removeListener=function(t,e,o,i){var u=n?n+t:t;if(!this._events[u])return this;if(!e)return 0==--this._eventsCount?this._events=new r:delete this._events[u],this;var s=this._events[u];if(s.fn)s.fn!==e||i&&!s.once||o&&s.context!==o||(0==--this._eventsCount?this._events=new r:delete this._events[u]);else{for(var c=0,a=[],l=s.length;c<l;c++)(s[c].fn!==e||i&&!s[c].once||o&&s[c].context!==o)&&a.push(s[c]);a.length?this._events[u]=1===a.length?a[0]:a:0==--this._eventsCount?this._events=new r:delete this._events[u]}return this},i.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new r:delete this._events[e])):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=n,i.EventEmitter=i,t.exports=i},269:function(t){t.exports=Quill}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t=n(269),e=n.n(t),r=n(327);e().debug("warn"),e().register("modules/imageUploader",r.Z);new(e())("#editor",{theme:"snow",modules:{toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic"],["clean"],["image"],["audio"]]},imageUploader:{upload:function(t){return new Promise((function(e,n){t?setTimeout((function(){return e(URL.createObjectURL(t))}),2e4):n("No file selected")}))}}}}).on("text-change",(function(t,e,n){console.log("An "+n+" triggered this change.",e,t)}))}()}();